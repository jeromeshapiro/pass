cmake_minimum_required(VERSION 3.8) 
project(pass)
include_directories(include)

add_library(CLI src/cli.c)
target_include_directories(CLI
    PUBLIC 
        $<INSTALL_INTERFACE:include>    
        $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
    PRIVATE
        ${CMAKE_CURRENT_SOURCE_DIR}/src
)

find_package(OpenSSL REQUIRED)

file(GLOB SOURCES "passphrase.c" "src/*.c")

if(OPENSSL_FOUND)
    set(OPENSSL_USE_STATIC_LIBS TRUE)
endif()

add_executable(${PROJECT_NAME} ${SOURCES})
target_link_libraries(${PROJECT_NAME} OpenSSL::Crypto)

if(APPLE)
	install(TARGETS ${PROJECT_NAME} DESTINATION /usr/local/bin)
elseif(UNIX)
	install(TARGETS ${PROJECT_NAME} DESTINATION /usr/bin)
endif()

